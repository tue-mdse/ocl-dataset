[comment encoding = UTF-8 /]
[module main('http:///rcaseentities.ecore', 'http://www.eclipse.org/uml2/5.0.0/UML')]

[import cmd2acl::common::generateReceiver/]
[import cmd2acl::common::generatePullObserver/]
[import cmd2acl::common::generatePushObserver/]
[import cmd2acl::common::generateLocationObserver/]
[import cmd2acl::common::generateSensorObserver/]
[import cmd2acl::common::generateBluetoothObserver/]
[import cmd2acl::common::generateBroadcastObserver/]

[template public generateMain(a : Class)]
[comment @main/]

[for (aStereoType : Stereotype | a.getAppliedStereotypes())]
	  
	  [if (aStereoType.name.toString().equalsIgnoreCase('ContextAttributeStereotype'))]
			[if (a.getValue(aStereoType, 'TagResponsibility').toString().equalsIgnoreCase('Pull'))]
				[generatePullObserver(a,aStereoType)/]
			[elseif (a.getValue(aStereoType, 'TagResponsibility').toString().equalsIgnoreCase('Push'))]
				[if (a.getValue(aStereoType, 'TagLibType').toString().equalsIgnoreCase('Bluetooth'))]					
					[generateBluetoothObserver(a,aStereoType)/]	
				[elseif (a.getValue(aStereoType, 'TagLibType').toString().equalsIgnoreCase('Sensor'))]
					[generateSensorObserver(a,aStereoType)/]
				[elseif (a.getValue(aStereoType, 'TagLibType').toString().equalsIgnoreCase('Location'))]
					[generateLocationObserver(a,aStereoType)/]
				[elseif (a.getValue(aStereoType, 'TagLibType').toString().equalsIgnoreCase('Broadcast'))]
					[generateBroadcastObserver(a,aStereoType)/]						
				[else]
					[generatePushObserver(a,aStereoType)/]	
				[/if]
			[/if]
		[generateReceiver(a)/]	
	  [/if]
[/for]

[/template]
