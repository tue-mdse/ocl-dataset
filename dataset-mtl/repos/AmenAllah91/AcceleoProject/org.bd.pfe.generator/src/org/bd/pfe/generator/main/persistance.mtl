[comment encoding = UTF-8 /]
[module persistance('http://www.businessdecision.fr/Generator')/]
[import org::bd::pfe::generator::persistance::jpa /]
[import org::bd::pfe::generator::persistance::classAssociation /]
[import org::bd::pfe::generator::persistance::associationPK /]
[import org::bd::pfe::generator::configuration::generateJavaConfig /]
[import org::bd::pfe::generator::configuration::generatePOMFiles /]
[import org::bd::pfe::generator::persistance::repository::generateRepository /]
[import org::bd::pfe::generator::persistance::repository::generateTokenRepository /]
[import org::bd::pfe::generator::persistance::dynamicrolemanagemententities::generateRole/]
[import org::bd::pfe::generator::persistance::generateToken /]
[template public persistance(model : Application)]

 
[for (it : PersistanceObject | model.persistanceModel.persiatnceObjets)]
	[it.generateEntity()/]
    [it.generateRolePerPriv()/]
    [it.generateRepository()/]
    [it.generateTokenRepository()/]
    [it.generatePRTokenRepository()/]
    [it.generateRepositoryRole()/]
[if (it.isAuthentification)]
	[it.generateToken()/]
    [it.generatePRToken()/]
[/if]
[/for]
	
[for (it : AssociationClass | model.persistanceModel.associationClass)]
	[it.generateAssoctiationClass()/]
    [it.generatePK()/]
    [it.generateRepositoryAssociation()/]

[/for]
	[model.generateJavaConfig()/]
    [model.generateDomainPOM()/]

   
[/template]
